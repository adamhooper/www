-# Local variables: "path", "dir", "readme"

%div.code-directory
  %h2.path
    Path:
    %span= "#{path}/"

  %ul.directory
    - unless path.to_s.blank?
      %li= link_to(raw('.. <span class="explanation">(parent directory)</span>'), code_path(:path => path.parent))
    - dir.reject{|e| e =~ /^\./}.sort.each do |entry|
      %li= entry_link(dir, path, entry)

  %p
    = link_to("Download as Tarball", download_code_path(:path => path))

- if readme
  .file
    %h2 README
    %pre~ readme

%p
  = link_to('Download README', download_code_path(:path => "#{path}/README"))
